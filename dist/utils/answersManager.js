import { QuestionTypes } from "../types/BaseQuestionType.js";
export function isAnswerValid(userAnswer, question) {
    const correctAnswer = question.Answer;
    if (Array.isArray(correctAnswer)) {
        const userAnswers = userAnswer
            .split(',')
            .map(a => a.trim().toLowerCase())
            .filter(Boolean)
            .sort();
        const correctAnswers = correctAnswer
            .map(a => a.trim().toLowerCase())
            .sort();
        if (question.QuestionType === QuestionTypes.MULT_ANSWER) {
            return arraysAreEqual(userAnswers, correctAnswers);
        }
        // For non-MULT_ANSWER types, allow if user's answer is in the correct answers
        return userAnswers.length === 1 && correctAnswers.includes(userAnswers[0]);
    }
    return userAnswer.trim().toLowerCase() === correctAnswer.trim().toLowerCase();
}
function arraysAreEqual(arr1, arr2) {
    if (arr1.length !== arr2.length)
        return false;
    return arr1.every((val, i) => val === arr2[i]);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5zd2Vyc01hbmFnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvYW5zd2Vyc01hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFvQixhQUFhLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQTtBQUU5RSxNQUFNLFVBQVUsYUFBYSxDQUFDLFVBQWtCLEVBQUUsUUFBMEI7SUFDeEUsTUFBTSxhQUFhLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztJQUV0QyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQztRQUMvQixNQUFNLFdBQVcsR0FBRyxVQUFVO2FBQ3pCLEtBQUssQ0FBQyxHQUFHLENBQUM7YUFDVixHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7YUFDaEMsTUFBTSxDQUFDLE9BQU8sQ0FBQzthQUNmLElBQUksRUFBRSxDQUFDO1FBRVosTUFBTSxjQUFjLEdBQUcsYUFBYTthQUMvQixHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7YUFDaEMsSUFBSSxFQUFFLENBQUM7UUFFWixJQUFJLFFBQVEsQ0FBQyxZQUFZLEtBQUssYUFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3RELE9BQU8sY0FBYyxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsQ0FBQztRQUN2RCxDQUFDO1FBRUQsOEVBQThFO1FBQzlFLE9BQU8sV0FBVyxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksY0FBYyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvRSxDQUFDO0lBRUQsT0FBTyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLEtBQUssYUFBYSxDQUFDLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ2xGLENBQUM7QUFFRCxTQUFTLGNBQWMsQ0FBQyxJQUFjLEVBQUUsSUFBYztJQUNsRCxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLE1BQU07UUFBRSxPQUFPLEtBQUssQ0FBQztJQUM5QyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VRdWVzdGlvblR5cGUsIFF1ZXN0aW9uVHlwZXMgfSBmcm9tIFwiLi4vdHlwZXMvQmFzZVF1ZXN0aW9uVHlwZS5qc1wiXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Fuc3dlclZhbGlkKHVzZXJBbnN3ZXI6IHN0cmluZywgcXVlc3Rpb246IEJhc2VRdWVzdGlvblR5cGUpOiBib29sZWFuIHtcbiAgICBjb25zdCBjb3JyZWN0QW5zd2VyID0gcXVlc3Rpb24uQW5zd2VyO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29ycmVjdEFuc3dlcikpIHtcbiAgICAgICAgY29uc3QgdXNlckFuc3dlcnMgPSB1c2VyQW5zd2VyXG4gICAgICAgICAgICAuc3BsaXQoJywnKVxuICAgICAgICAgICAgLm1hcChhID0+IGEudHJpbSgpLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgICAgICAuc29ydCgpO1xuXG4gICAgICAgIGNvbnN0IGNvcnJlY3RBbnN3ZXJzID0gY29ycmVjdEFuc3dlclxuICAgICAgICAgICAgLm1hcChhID0+IGEudHJpbSgpLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAuc29ydCgpO1xuXG4gICAgICAgIGlmIChxdWVzdGlvbi5RdWVzdGlvblR5cGUgPT09IFF1ZXN0aW9uVHlwZXMuTVVMVF9BTlNXRVIpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJheXNBcmVFcXVhbCh1c2VyQW5zd2VycywgY29ycmVjdEFuc3dlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9yIG5vbi1NVUxUX0FOU1dFUiB0eXBlcywgYWxsb3cgaWYgdXNlcidzIGFuc3dlciBpcyBpbiB0aGUgY29ycmVjdCBhbnN3ZXJzXG4gICAgICAgIHJldHVybiB1c2VyQW5zd2Vycy5sZW5ndGggPT09IDEgJiYgY29ycmVjdEFuc3dlcnMuaW5jbHVkZXModXNlckFuc3dlcnNbMF0pO1xuICAgIH1cblxuICAgIHJldHVybiB1c2VyQW5zd2VyLnRyaW0oKS50b0xvd2VyQ2FzZSgpID09PSBjb3JyZWN0QW5zd2VyLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBhcnJheXNBcmVFcXVhbChhcnIxOiBzdHJpbmdbXSwgYXJyMjogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgICBpZiAoYXJyMS5sZW5ndGggIT09IGFycjIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGFycjEuZXZlcnkoKHZhbCwgaSkgPT4gdmFsID09PSBhcnIyW2ldKTtcbn0iXX0=