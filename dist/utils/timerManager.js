let timerIntervalId = null;
export function startCountdownTimer(onTimeUp) {
    const timerEl = document.getElementById("countdown-timer");
    if (!timerEl) {
        console.warn("Timer element not found");
        return;
    }
    if (timerIntervalId !== null) {
        clearInterval(timerIntervalId);
    }
    let timeLeft = (() => {
        const val = sessionStorage.getItem("timePerQuestion");
        const parsed = parseInt(val ?? "", 10);
        return isNaN(parsed) || parsed <= 0 ? 30 : parsed;
    })();
    timerEl.textContent = formatTime(timeLeft);
    timerEl.style.color = '';
    timerIntervalId = window.setInterval(() => {
        timeLeft--;
        timerEl.textContent = formatTime(timeLeft);
        if (timeLeft <= 5) {
            timerEl.style.color = 'red';
        }
        if (timeLeft <= 0) {
            clearInterval(timerIntervalId);
            onTimeUp?.(); // callback function to handle auto submit on time up
        }
    }, 1000);
}
function formatTime(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${String(mins).padStart(2, "0")}:${String(secs).padStart(2, "0")}`;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZXJNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL3RpbWVyTWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLGVBQWUsR0FBa0IsSUFBSSxDQUFDO0FBRTFDLE1BQU0sVUFBVSxtQkFBbUIsQ0FBQyxRQUFxQjtJQUNyRCxNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFFM0QsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ1gsT0FBTyxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1FBQ3hDLE9BQU87SUFDWCxDQUFDO0lBRUQsSUFBSSxlQUFlLEtBQUssSUFBSSxFQUFFLENBQUM7UUFDM0IsYUFBYSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFRCxJQUFJLFFBQVEsR0FBRyxDQUFDLEdBQUcsRUFBRTtRQUNqQixNQUFNLEdBQUcsR0FBRyxjQUFjLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDdEQsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLEdBQUcsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDdkMsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksTUFBTSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7SUFDdEQsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUVMLE9BQU8sQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztJQUV6QixlQUFlLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUU7UUFDdEMsUUFBUSxFQUFFLENBQUM7UUFDWCxPQUFPLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUUzQyxJQUFJLFFBQVEsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUNoQixPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDaEMsQ0FBQztRQUVELElBQUksUUFBUSxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQ2hCLGFBQWEsQ0FBQyxlQUFnQixDQUFDLENBQUM7WUFDaEMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFDLHFEQUFxRDtRQUN2RSxDQUFDO0lBQ0wsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ2IsQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLE9BQWU7SUFDL0IsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDdEMsTUFBTSxJQUFJLEdBQUcsT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUMxQixPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQztBQUMvRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHRpbWVySW50ZXJ2YWxJZDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydENvdW50ZG93blRpbWVyKG9uVGltZVVwPzogKCkgPT4gdm9pZCkge1xuICAgIGNvbnN0IHRpbWVyRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdW50ZG93bi10aW1lclwiKTtcblxuICAgIGlmICghdGltZXJFbCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJUaW1lciBlbGVtZW50IG5vdCBmb3VuZFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aW1lckludGVydmFsSWQgIT09IG51bGwpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lckludGVydmFsSWQpO1xuICAgIH1cblxuICAgIGxldCB0aW1lTGVmdCA9ICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJ0aW1lUGVyUXVlc3Rpb25cIik7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSW50KHZhbCA/PyBcIlwiLCAxMCk7XG4gICAgICAgIHJldHVybiBpc05hTihwYXJzZWQpIHx8IHBhcnNlZCA8PSAwID8gMzAgOiBwYXJzZWQ7XG4gICAgfSkoKTtcblxuICAgIHRpbWVyRWwudGV4dENvbnRlbnQgPSBmb3JtYXRUaW1lKHRpbWVMZWZ0KTtcbiAgICB0aW1lckVsLnN0eWxlLmNvbG9yID0gJyc7XG5cbiAgICB0aW1lckludGVydmFsSWQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0aW1lTGVmdC0tO1xuICAgICAgICB0aW1lckVsLnRleHRDb250ZW50ID0gZm9ybWF0VGltZSh0aW1lTGVmdCk7XG5cbiAgICAgICAgaWYgKHRpbWVMZWZ0IDw9IDUpIHtcbiAgICAgICAgICAgIHRpbWVyRWwuc3R5bGUuY29sb3IgPSAncmVkJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aW1lTGVmdCA8PSAwKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySW50ZXJ2YWxJZCEpO1xuICAgICAgICAgICAgb25UaW1lVXA/LigpOyAvLyBjYWxsYmFjayBmdW5jdGlvbiB0byBoYW5kbGUgYXV0byBzdWJtaXQgb24gdGltZSB1cFxuICAgICAgICB9XG4gICAgfSwgMTAwMCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWUoc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICAgIGNvbnN0IHNlY3MgPSBzZWNvbmRzICUgNjA7XG4gICAgcmV0dXJuIGAke1N0cmluZyhtaW5zKS5wYWRTdGFydCgyLCBcIjBcIil9OiR7U3RyaW5nKHNlY3MpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gO1xufSJdfQ==