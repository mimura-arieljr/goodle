import { loadSubjects, bindSubjectCardEvents } from "../utils/subjectsManager.js";
import { imitateLoadTime } from "../utils/imitateLoadingTime.js";
import { questionsView } from "./questionsView.js";
export async function subjectsView(mainPage, subjectsPage, questionsPage, spinner) {
    const backBtn = document.getElementById("subjects-back-btn");
    backBtn.addEventListener("click", () => {
        mainPage.classList.remove("hidden");
        subjectsPage.classList.add("hidden");
    });
    // dynamically load subjects in the UI
    await loadSubjects();
    // callback function to bind the card event listeners to the subject
    // and save the chosen subject to a session storage
    bindSubjectCardEvents(async (subjectName) => {
        subjectsPage.classList.add("hidden");
        await showSpinner(spinner, questionsPage);
        questionsView(subjectsPage, questionsPage, subjectName);
    });
}
function showSpinner(spinner, questionsPage) {
    return new Promise((resolve) => {
        spinner.classList.remove("hidden");
        setTimeout(() => {
            spinner.classList.add("hidden");
            questionsPage.classList.remove("hidden");
            resolve();
        }, imitateLoadTime());
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ViamVjdHNWaWV3LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3ZpZXdzL3N1YmplY3RzVmlldy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLHFCQUFxQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDbEYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUVuRCxNQUFNLENBQUMsS0FBSyxVQUFVLFlBQVksQ0FBQyxRQUFxQixFQUFFLFlBQXlCLEVBQUUsYUFBMEIsRUFBRSxPQUFvQjtJQUNqSSxNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFzQixDQUFDO0lBRWxGLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO1FBQ25DLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3BDLFlBQVksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3pDLENBQUMsQ0FBQyxDQUFDO0lBRUgsc0NBQXNDO0lBQ3RDLE1BQU0sWUFBWSxFQUFFLENBQUM7SUFFckIsb0VBQW9FO0lBQ3BFLG1EQUFtRDtJQUNuRCxxQkFBcUIsQ0FBQyxLQUFLLEVBQUUsV0FBbUIsRUFBRSxFQUFFO1FBQ2hELFlBQVksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3JDLE1BQU0sV0FBVyxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQztRQUMxQyxhQUFhLENBQUMsWUFBWSxFQUFFLGFBQWEsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUM1RCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFRCxTQUFTLFdBQVcsQ0FBQyxPQUFvQixFQUFFLGFBQTBCO0lBQ2pFLE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtRQUMzQixPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNuQyxVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ1osT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDaEMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDekMsT0FBTyxFQUFFLENBQUM7UUFDZCxDQUFDLEVBQUUsZUFBZSxFQUFFLENBQUMsQ0FBQztJQUMxQixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsb2FkU3ViamVjdHMsIGJpbmRTdWJqZWN0Q2FyZEV2ZW50cyB9IGZyb20gXCIuLi91dGlscy9zdWJqZWN0c01hbmFnZXIuanNcIjtcbmltcG9ydCB7IGltaXRhdGVMb2FkVGltZSB9IGZyb20gXCIuLi91dGlscy9pbWl0YXRlTG9hZGluZ1RpbWUuanNcIjtcbmltcG9ydCB7IHF1ZXN0aW9uc1ZpZXcgfSBmcm9tIFwiLi9xdWVzdGlvbnNWaWV3LmpzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdWJqZWN0c1ZpZXcobWFpblBhZ2U6IEhUTUxFbGVtZW50LCBzdWJqZWN0c1BhZ2U6IEhUTUxFbGVtZW50LCBxdWVzdGlvbnNQYWdlOiBIVE1MRWxlbWVudCwgc3Bpbm5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBiYWNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJqZWN0cy1iYWNrLWJ0blwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIGJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbWFpblBhZ2UuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgICAgICAgc3ViamVjdHNQYWdlLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgfSk7XG5cbiAgICAvLyBkeW5hbWljYWxseSBsb2FkIHN1YmplY3RzIGluIHRoZSBVSVxuICAgIGF3YWl0IGxvYWRTdWJqZWN0cygpO1xuXG4gICAgLy8gY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmluZCB0aGUgY2FyZCBldmVudCBsaXN0ZW5lcnMgdG8gdGhlIHN1YmplY3RcbiAgICAvLyBhbmQgc2F2ZSB0aGUgY2hvc2VuIHN1YmplY3QgdG8gYSBzZXNzaW9uIHN0b3JhZ2VcbiAgICBiaW5kU3ViamVjdENhcmRFdmVudHMoYXN5bmMgKHN1YmplY3ROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgc3ViamVjdHNQYWdlLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICAgIGF3YWl0IHNob3dTcGlubmVyKHNwaW5uZXIsIHF1ZXN0aW9uc1BhZ2UpO1xuICAgICAgICBxdWVzdGlvbnNWaWV3KHN1YmplY3RzUGFnZSwgcXVlc3Rpb25zUGFnZSwgc3ViamVjdE5hbWUpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzaG93U3Bpbm5lcihzcGlubmVyOiBIVE1MRWxlbWVudCwgcXVlc3Rpb25zUGFnZTogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgc3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNwaW5uZXIuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgICAgICAgICAgIHF1ZXN0aW9uc1BhZ2UuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSwgaW1pdGF0ZUxvYWRUaW1lKCkpO1xuICAgIH0pO1xufVxuXG5cbiJdfQ==